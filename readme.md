# vk-group-analytic-backend

## Описание

Кодовая база серверной части проекта "Аналитика группы VK по полу и возрасту". <br>
Стэк : nodejs, mysql
При помощи nodejs осуществляется обработка, получение данных vkAPI(https://dev.vk.com/reference)

файл vkapi.js - описание методов для взаимодействия с vkapi
файл index.js - запускающий и реализующий всю работу сервера
Файлы package.json, package-lock.json - список зависимостей
Файл node_modules - установленные пакеты
Файл .gitignore - список файлов, которые должен игнорировать git
Файл db.db - база sqlite, для его просмотра необходимо воспользоваться расширением кодового редактора или <br>
cпециальным ПО(к примеру https://sqlitebrowser.org)

### Подключение к БД

`const db = new sqlite3.Database('./db.db', sqlite3.OPEN_READWRITE, (err) => { if (err) return console.error(err.message) console.log('connection successfull') })`

### Механизм работы

1. Запрос `/getGroupMembers` с query параметром group_id <br>
2. Запрос к vkAPi для получения данных о сообществе с id=group_id <br>
3. Запрос данных id подписчиков группы с id равным group_id c vkAPI <br>
4. Проверка, есть ли в БД данные о пользователях с ранее полученными id <br>
5. Запрос данных о имеющихся в БД пользователях, запрос данных о неизвестных пользователях <br>
6. Запись неизвестных пользователей в БД <br>
7. Формирование выходных данных <br>
8. Возврат результата в формате JSON <br>

## Установка
* В системе пользователя должна быть установлена node 12v+ (https://nodejs.org/en/) 

### 1)Склонировать репозиторий

а) git clone https://github.com/ildarum21/vk-group-analytic-backend.git <br>
b) В верхней панели, над файловой структурой в правом верхнем углу имеется зеленая кнопка "CODE", <br>
при нажатии на нее появляется всплывающее окно, где необходимо нажать DOWNLOAD ZIP <br>

### 2) В папке проекта, для установки зависимостей, при помощи консоли ввести <br>

`yarn || npm i`

### 3) Запустить работу сервера при помощи команды

`yarn start || npm start`

### 4) При запуске сервера, расположенном на http://localhost:3001 приложение может  потребовать разрешениена получение данных групп от вашего авторизированного профиля вк
